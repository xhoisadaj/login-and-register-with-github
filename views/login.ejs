<!DOCTYPE html>
<html>
  <head>
    <title>Login Register App</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="./css/main.css" />

    <script type="text/javascript">
      $(document).ready(() => {
        $("#form").submit((event) => {
          event.preventDefault();

          $.ajax({
            type: "POST",
            url: "/login",
            data: $("#form").serialize(),
            dataType: "json",
            success: (response) => {
              $("#form")[0].reset();

              document.getElementById("check").innerHTML = response.Success;
              //ADD THIS CODE
              setTimeout(() => {
                document.getElementById("check").innerHTML = "";
              }, 3000);
              if (response.Success == "Success!") {
                document.getElementById("aa").click();
              }
            },
            error: () => {},
          });
        });
      });
    </script>
  </head>

  <body>
    <div class="col-md-4 col-md-offset-4 form-card">
      <div>
        <p>Login</p>
      </div>
      <div class="form-group">
        <form id="form" method="post">
          <input
            type="text"
            name="email"
            pattern="[-!#$%&'*+\/0-9=?ก-๙A-Z^_a-z`{|}~](\.?[-!#$%&'*+\/0-9=?ก-๙A-Z^_a-z`{|}~])*@[ก-๙a-zA-Z0-9](-*\.?[ก-๙a-zA-Z0-9])*\.[ก-๙a-zA-Z](-?[ก-๙a-zA-Z0-9])+$"
            placeholder="E-mail"
            required=""
            class="form-control"
          /><br />
          <input
            type="password"
            name="password"
            placeholder="Password"
            required=""
            class="form-control"
          /><br />
          <input type="submit" value="Login" class="btn btn-success" />
        </form>
      </div>
      <div class="mssg bg-danger">
        <span id="check"></span>
      </div>
      <div id="LangTable"><a href="/profile" id="aa"></a></div>
      <div>
        <span>Login with github </span><a href="/auth/github">click here</a>
      </div>

      <div id="LangTable">
        <span>Do you want to register a new Account? </span
        ><a href="/">click here</a>
      </div>
    </div>
    <!-- <a id="login" class="fcc-btn" href="/auth/github"
      >Login with GitHub <i class="fa fa-github"></i
    ></a> -->
  </body>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
  />
</html>

<style>
  body {
    text-align: center !important;
  }
  p {
    margin-top: 20px;
    font-size: 30px;
  }
  input {
    text-align: center;
  }
  #LangTable {
    margin-bottom: 15px;
  }
  .form-card {
    background-color: #fff8eb;
    border-radius: 10px;
    margin-top: 130px;
  }
  .mssg {
    margin-top: 5px;
    margin-bottom: 5px;
    border-radius: 5px;
  }
</style>
